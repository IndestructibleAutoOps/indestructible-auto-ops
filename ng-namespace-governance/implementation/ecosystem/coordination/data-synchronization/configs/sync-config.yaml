#
# @GL-governed
# @GL-layer: GL10-29
# @GL-semantic: coordination
# @GL-audit-trail: ../../governance/GL_SEMANTIC_ANCHOR.json
#
# Data Synchronization Configuration
# GL Governance Layer: GL10-29 (Operational Layer)

apiVersion: ecosystem.coordination/v1
kind: DataSyncConfig
metadata:
  name: data-sync-config
  version: "1.0.0"

# Sync Engine Configuration
sync_engine:
  enabled: true
  mode: real-time  # Options: real-time, scheduled, manual
  batch_size: 1000
  max_retries: 3
  retry_delay: 5  # seconds
  timeout: 300  # seconds

# Conflict Resolution
conflict_resolution:
  default_strategy: last-write-wins  # Options: last-write-wins, merge, custom
  strategies:
    last_write_wins:
      enabled: true
    merge:
      enabled: true
      merge_fields: true
    custom:
      enabled: false

# Data Connectors
connectors:
  aws:
    enabled: true
    services:
      s3:
        enabled: true
        region: us-east-1
      dynamodb:
        enabled: true
        region: us-east-1
  
  gcp:
    enabled: true
    services:
      storage:
        enabled: true
        project: ""
      firestore:
        enabled: true
        project: ""
  
  azure:
    enabled: true
    services:
      blob:
        enabled: true
        account: ""
      cosmos:
        enabled: true
        account: ""
  
  onpremise:
    enabled: true
    services:
      filesystem:
        enabled: true
        base_path: /data
      database:
        enabled: true
        connection_string: ""

# Scheduler Configuration
scheduler:
  enabled: true
  default_interval: 3600  # seconds (1 hour)
  
  schedules:
    - name: platform-config-sync
      source: platform-core
      destinations:
        - platform-aws
        - platform-gcp
      interval: 1800  # 30 minutes
      enabled: true
    
    - name: backup-sync
      source: platform-aws
      destinations:
        - platform-backup
      interval: 86400  # 24 hours
      enabled: true

# Datasets Configuration
datasets:
  - name: platform-config
    description: Platform configuration data
    sync_mode: real-time
    conflict_resolution: last-write-wins
    
  - name: service-metadata
    description: Service metadata
    sync_mode: real-time
    conflict_resolution: merge
    
  - name: monitoring-data
    description: Monitoring and metrics data
    sync_mode: scheduled
    conflict_resolution: last-write-wins

# Versioning
versioning:
  enabled: true
  max_versions: 10
  retention_days: 30

# Monitoring
monitoring:
  metrics:
    enabled: true
    port: 9093
  logging:
    level: INFO
    format: json
    
# Performance
performance:
  compression:
    enabled: true
    level: 6  # 0-9
  parallel_transfers: 4
  chunk_size: 1048576  # 1MB

# Security
security:
  encryption:
    enabled: false
    algorithm: AES256
  authentication:
    enabled: false
