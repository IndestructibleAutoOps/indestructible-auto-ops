{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.machinenativeops.com/platform-instance/v1.0.0.json",
  "title": "Platform Instance Schema",
  "description": "Schema for platform instance configurations",
  "version": "1.0.0",
  "semantic_anchor": "FORMATLAYER.SCHEMA.PLATFORMINSTANCE",

  "type": "object",
  "required": ["platform", "cloud", "ecosystem_cloud"],

  "properties": {
    "platform": {
      "type": "object",
      "required": ["name", "instance_type", "owner"],
      
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9-]*$",
          "description": "Platform instance name in kebab-case"
        },
        
        "instance_type": {
          "type": "string",
          "enum": ["dev", "staging", "prod", "customer"],
          "description": "Platform instance type"
        },
        
        "owner": {
          "type": "string",
          "format": "email",
          "description": "Platform owner email"
        },
        
        "cost_center": {
          "type": "string",
          "pattern": "^cc-[a-z0-9-]+$",
          "description": "Cost center identifier"
        }
      }
    },

    "cloud": {
      "type": "object",
      "required": ["provider", "region"],
      
      "properties": {
        "provider": {
          "type": "string",
          "enum": ["aws", "azure", "gcp", "on-premise"],
          "description": "Cloud provider"
        },
        
        "region": {
          "type": "string",
          "description": "Cloud region"
        },
        
        "account_id": {
          "type": "string",
          "pattern": "^[0-9]{12}$",
          "description": "Cloud account ID (AWS)"
        },
        
        "profile": {
          "type": "string",
          "description": "AWS profile name"
        }
      }
    },

    "ecosystem_cloud": {
      "type": "object",
      "description": "Ecosystem cloud adapter configuration",
      
      "properties": {
        "storage_adapter": {
          "type": "string",
          "enum": ["aws", "azure", "gcp", "minio", "ceph"]
        },
        
        "compute_adapter": {
          "type": "string",
          "enum": ["aws", "azure", "gcp", "on-premise"]
        },
        
        "queue_adapter": {
          "type": "string",
          "enum": ["aws", "azure", "rabbitmq", "redis"]
        },
        
        "secrets_adapter": {
          "type": "string",
          "enum": ["aws", "azure", "gcp", "vault"]
        },
        
        "logging_adapter": {
          "type": "string",
          "enum": ["aws", "azure", "gcp", "elk"]
        }
      }
    },

    "networking": {
      "type": "object",
      "description": "Network configuration",
      
      "properties": {
        "vpc_cidr": {
          "type": "string",
          "pattern": "^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}/\\d{1,2}$"
        },
        
        "availability_zones": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        }
      }
    },

    "monitoring": {
      "type": "object",
      "description": "Monitoring configuration",
      
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        
        "dashboard": {
          "type": "string"
        }
      }
    },

    "limits": {
      "type": "object",
      "description": "Resource limits",
      
      "properties": {
        "max_instances": {
          "type": "integer",
          "minimum": 1
        },
        
        "max_storage_gb": {
          "type": "integer",
          "minimum": 1
        }
      }
    }
  }
}