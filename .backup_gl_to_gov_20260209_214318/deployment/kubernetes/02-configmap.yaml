apiVersion: v1
kind: ConfigMap
metadata:
  name: ng-governance-config
  namespace: ng-governance
  labels:
    ng-code: NG70200
    ng-category: semantic-relation
data:
  # NG 命名规范配置
  ng-naming-standards.yaml: |
    ng_standards:
      NG10100:
        name: "Code Package Namespace"
        pattern: "kebab-case"
        applies_to: ["directories"]
        rule: "Directories must use kebab-case"
        exceptions: [".git", "__pycache__", "node_modules", ".venv", "venv"]
      
      NG10200:
        name: "File Namespace"
        pattern: "kebab-case"
        applies_to: ["files"]
      
      NG10300:
        name: "Variable Namespace"
        pattern: "snake_case"
        applies_to: ["variables"]
      
      NG10400:
        name: "Function Namespace"
        pattern: "snake_case"
        applies_to: ["functions"]
      
      NG10500:
        name: "Class Namespace"
        pattern: "PascalCase"
        applies_to: ["classes"]
  
  # 参数优化配置
  parametric-config.yaml: |
    learning_rate:
      base: 0.01
      min: 0.001
      max: 0.1
      adaptive: true
    
    feedback_gains:
      base_range: [0.01, 0.3]
      safe_range: [0.01, 0.9]
      adaptive: true
    
    parameter_bounds:
      weight:
        min: 0.0
        max: 1.0
      threshold:
        min: 0.5
        max: 0.95
      confidence:
        min: 0.0
        max: 1.0
  
  # 收敛性保证配置
  convergence-config.yaml: |
    lipschitz_constant_target: 0.9
    max_gradient_norm: 0.5
    convergence_threshold: 0.001
    max_iterations: 10000
    
    stability_checks:
      eigenvalue_analysis:
        frequency: "every_10_updates"
        condition: "all_eigenvalues < 1"
      
      bode_plot_analysis:
        frequency: "every_5_cycles"
        condition: "phase_margin > 45_degrees AND gain_margin > 6_dB"
  
  # 故障回退配置
  fallback-config.yaml: |
    hierarchy:
      - level: 1
        mode: "ADVANCED_PARAMETRIC_VECTORIZED"
        ng_binding: ["NG60100", "NG70600", "NG80300"]
      
      - level: 2
        mode: "BASIC_PARAMETRIC"
        ng_binding: ["NG60100", "NG50500"]
        intent_verification: "must_preserve_NG60100"
      
      - level: 3
        mode: "RULE_BASED_HEURISTIC"
        ng_binding: ["NG60100", "NG50700"]
        intent_verification: "must_preserve_NG60100"
      
      - level: 4
        mode: "HUMAN_IN_THE_LOOP"
        ng_binding: ["NG60100"]
        intent_verification: "human_confirms_NG60100_alignment"
    
    validation:
      intent_preservation_threshold: 0.95
      safety_threshold: 0.95
      semantic_anchor_threshold: 0.9
  
  # 监控配置
  monitoring-config.yaml: |
    metrics:
      - name: ng_violations_total
        type: counter
        help: "Total number of NG violations"
      
      - name: ng_validation_duration_seconds
        type: histogram
        help: "Duration of NG validation"
        buckets: [0.001, 0.01, 0.1, 1.0, 10.0]
      
      - name: parameter_convergence_rate
        type: gauge
        help: "Current parameter convergence rate"
      
      - name: feedback_loop_stability
        type: gauge
        help: "Feedback loop stability metric"
      
      - name: fallback_activation_total
        type: counter
        help: "Total number of fallback activations"
        labels: ["level", "mode"]