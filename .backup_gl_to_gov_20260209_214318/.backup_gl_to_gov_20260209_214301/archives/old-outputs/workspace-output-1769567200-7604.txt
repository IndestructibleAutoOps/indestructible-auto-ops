/**
 * @GL-governed
 * @GL-layer: aep-engine-app
 * @GL-semantic: (tabs)-index
 * @GL-audit-trail: ../governance/GL_SEMANTIC_ANCHOR.json
 * 
 * GL Unified Charter Activated
 */

import { ScrollView, Text, View, TouchableOpacity, RefreshControl } from "react-native";
import { useState } from "react";
import { ScreenContainer } from "@/components/screen-container";

/**
 * Home Screen - AEP Engine Governance & Audit App
 *
 * Displays governance audit summary with statistics, recent events, and quick actions.
 */
export default function HomeScreen() {
  const [refreshing, setRefreshing] = useState(false);

  const onRefresh = async () => {
    setRefreshing(true);
    // Simulate API call
    await new Promise((resolve) => setTimeout(resolve, 1000));
    setRefreshing(false);
  };

  return (
    <ScreenContainer className="p-0">
      <ScrollView
        contentContainerStyle={{ flexGrow: 1 }}
        refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />}
      >
        {/* Header Section */}
        <View className="bg-primary px-6 pt-6 pb-8">
          <Text className="text-3xl font-bold text-white mb-2">AEP Engine</Text>
          <Text className="text-sm text-white opacity-80">Governance & Audit</Text>
        </View>

        {/* Content Section */}
        <View className="flex-1 px-6 py-6 gap-6">
          {/* Statistics Cards */}
          <View className="gap-3">
            <Text className="text-lg font-semibold text-foreground">Latest Audit Summary</Text>
            <View className="gap-3">
              {/* Total Detections Card */}
              <View className="bg-surface rounded-xl p-4 border border-border flex-row justify-between items-center">
                <View>
                  <Text className="text-sm text-muted mb-1">Total Detections</Text>
                  <Text className="text-3xl font-bold text-foreground">24</Text>
                </View>
                <View className="bg-primary bg-opacity-10 rounded-lg p-3">
                  <Text className="text-2xl">üìä</Text>
                </View>
              </View>

              {/* Issues Found Card */}
              <View className="bg-surface rounded-xl p-4 border border-border flex-row justify-between items-center">
                <View>
                  <Text className="text-sm text-muted mb-1">Issues Found</Text>
                  <Text className="text-3xl font-bold text-error">8</Text>
                </View>
                <View className="bg-error bg-opacity-10 rounded-lg p-3">
                  <Text className="text-2xl">‚ö†Ô∏è</Text>
                </View>
              </View>

              {/* Pass Rate Card */}
              <View className="bg-surface rounded-xl p-4 border border-border flex-row justify-between items-center">
                <View>
                  <Text className="text-sm text-muted mb-1">Pass Rate</Text>
                  <Text className="text-3xl font-bold text-success">67%</Text>
                </View>
                <View className="bg-success bg-opacity-10 rounded-lg p-3">
                  <Text className="text-2xl">‚úì</Text>
                </View>
              </View>
            </View>
          </View>
