# @GL-governed
# @GL-layer: GL90-99
# @GL-semantic: governance-manifest
# @GL-audit-trail: ../../engine/governance/GL_SEMANTIC_ANCHOR.json
# 
# GL Unified Architecture Governance Framework Activated

---
# GL Layer: GL00-09 Strategic Layer
# Purpose: Central governance entry point
apiVersion: governance.machinenativeops.io/v1
kind: GovernanceManifest
metadata:
  name: machine-native-ops-governance
  version: "2.0.0"
  created: "2025-01-05"
  updated: "2026-01-27"
  owner: "MachineNativeOps"
  gl_layer: "GL00-09"
spec:
  # 系統概述 - 給 AI 的系統圖譜
  description: |
    Machine-Native Organizational Naming Governance Framework
    - Purpose: Provide machine-readable, executable governance for naming standards
    - Target: AI agents and automation tools
    - Approach: Schema-driven, self-describing, fully automatable
    - Architecture: GL (Governance Layers) - 7 layers from Strategic to Meta-Specification
  
  # GL (Governance Layers) Architecture
  gl_layers:
    reference: "workspace/governance/gov-architecture/GL_LAYERS.yaml"
    quickref: "workspace/governance/gov-architecture/GL_QUICKREF.md"
    mapping: "workspace/governance/gov-architecture/GL_MAPPING.csv"
    stabilization: "workspace/governance/gov-architecture/GL_SEMANTIC_STABILIZATION.yaml"
    readme: "workspace/governance/gov-architecture/README.md"
  
  # 核心模組映射 - AI 導航地圖
  modules:
    # GL00-09: Strategic Layer
    - id: "vision-strategy"
      name: "Vision and Strategy"
      gl_layer: "GL00-09"
      status: "stable"
      location: "workspace/src/governance/00-vision-strategy"
      schemas:
        - "workspace/src/governance/00-vision-strategy/naming-adoption-phases.yaml"
        - "workspace/src/governance/00-vision-strategy/naming-governance-summary.yaml"
      functions:
        - "generate_adoption_roadmap"
        - "get_strategic_objectives"
    
    - id: "architecture"
      name: "Governance Architecture"
      gl_layer: "GL00-09"
      status: "stable"
      location: "workspace/src/governance/01-architecture"
      schemas:
        - "workspace/src/governance/01-architecture/naming-governance-structure.yaml"
        - "workspace/src/governance/01-architecture/naming-escalation-matrix.yaml"
      functions:
        - "get_organizational_structure"
        - "resolve_escalation"
        - "get_role_permissions"
    
    - id: "decision"
      name: "Decision Management"
      gl_layer: "GL00-09"
      status: "stable"
      location: "workspace/src/governance/02-decision"
      schemas:
        - "workspace/src/governance/02-decision/stakeholder-matrix.yaml"
        - "workspace/src/governance/02-decision/naming-exception-process.yaml"
        - "workspace/src/governance/02-decision/naming-incentives.yaml"
      functions:
        - "get_stakeholder_map"
        - "process_exception_request"
        - "calculate_incentives"
    
    - id: "change"
      name: "Change Management"
      gl_layer: "GL00-09"
      status: "stable"
      location: "workspace/src/governance/03-change"
      schemas:
        - "workspace/src/governance/03-change/naming-rfc-workflow.yaml"
        - "workspace/src/governance/03-change/naming-change-request.yaml"
        - "workspace/src/governance/03-change/naming-collaboration-workflow.yaml"
        - "workspace/src/governance/03-change/naming-migration-plan.yaml"
      functions:
        - "create_change_request"
        - "validate_rfc"
        - "execute_migration_phase"
    
    - id: "system-architecture"
      name: "System Architecture"
      gl_layer: "GL00-09"
      status: "active"
      location: "gl/00-strategic/artifacts"
      schemas:
        - "gl/00-strategic/artifacts/frontend-backend-separation-architecture.yaml"
      documentation:
        - "docs/architecture/frontend-backend-separation-diagrams.md"
      functions:
        - "define_system_boundaries"
        - "specify_communication_patterns"
        - "manage_api_versions"
      description: |
        Frontend-backend separation architecture with API-first design.
        Defines system boundaries, communication patterns, development workflow,
        and deployment strategy for parallel frontend-backend development.
    
    # GL10-29: Operational Layer
    - id: "policy"
      name: "Governance Policies"
      gl_layer: "GL10-29"
      status: "stable"
      location: "workspace/src/governance/10-policy"
      schemas:
        - "workspace/src/governance/10-policy/naming-governance-policy.yaml"
        - "workspace/src/governance/10-policy/naming-validation-automations.yaml"
        - "workspace/src/governance/10-policy/naming-alert-rules.yaml"
        - "workspace/src/governance/10-policy/naming-observability-dashboard.yaml"
        - "workspace/src/governance/10-policy/naming-security-policy.yaml"
      functions:
        - "validate_naming"
        - "check_compliance"
        - "generate_alerts"
        - "check_security_requirements"
    
    - id: "culture"
      name: "Culture and Capability"
      gl_layer: "GL10-29"
      status: "stable"
      location: "workspace/src/governance/12-culture-capability"
      schemas:
        - "workspace/src/governance/12-culture-capability/naming-training-map.yaml"
      functions:
        - "get_training_plan"
        - "assign_roles"
    
    - id: "metrics"
      name: "Metrics and Reporting"
      gl_layer: "GL10-29"
      status: "stable"
      location: "workspace/src/governance/13-metrics-reporting"
      schemas:
        - "workspace/src/governance/13-metrics-reporting/naming-metrics-kpi.yaml"
      functions:
        - "calculate_kpi"
        - "generate_reports"
    
    - id: "audit"
      name: "Audit and Compliance"
      gl_layer: "GL60-80"
      status: "stable"
      location: "workspace/src/governance/07-audit"
      schemas:
        - "workspace/src/governance/07-audit/naming-audit-checklist.yaml"
      functions:
        - "run_audit"
        - "generate_compliance_report"
    
    - id: "improvement"
      name: "Continuous Improvement"
      gl_layer: "GL10-29"
      status: "stable"
      location: "workspace/src/governance/14-improvement"
      schemas:
        - "workspace/src/governance/14-improvement/naming-pdca-cycle.yaml"
        - "workspace/src/governance/14-improvement/naming-improvement-log.yaml"
      functions:
        - "execute_pdca_cycle"
        - "log_improvement"
    
    # GL30-49: Execution Layer
    - id: "templates"
      name: "Templates and Examples"
      gl_layer: "GL30-49"
      status: "stable"
      location: "workspace/src/governance/27-templates"
      schemas:
        - "workspace/src/governance/27-templates/naming-templates.yaml"
        - "workspace/src/governance/27-templates/naming-examples-library.yaml"
      functions:
        - "generate_template"
        - "get_examples"
    
    - id: "tools"
      name: "Automation Tools"
      gl_layer: "GL30-49"
      status: "stable"
      location: "workspace/src/governance/35-scripts"
      executable:
        - "workspace/src/governance/35-scripts/naming-generator.sh"
        - "workspace/src/governance/35-scripts/naming-validator.sh"
        - "workspace/src/governance/35-scripts/naming-cli-tool.sh"
      schemas:
        - "workspace/src/governance/35-scripts/naming-patterns.yaml"
      functions:
        - "generate_name"
        - "validate_name"
        - "check_compliance"
        - "batch_validate"
    
    - id: "api-design"
      name: "API Design Specification"
      gl_layer: "GL30-49"
      status: "active"
      location: "gl/30-execution/artifacts"
      schemas:
        - "gl/30-execution/artifacts/api-design-specification.yaml"
      functions:
        - "define_api_endpoints"
        - "validate_api_contract"
        - "generate_openapi_spec"
        - "enforce_api_standards"
      description: |
        Comprehensive API design specification including RESTful conventions,
        versioning strategy, authentication/authorization patterns, request/response
        formats, error handling, and OpenAPI template.
    
    # GL20-29: Data Layer
    - id: "database-architecture"
      name: "Database Architecture"
      gl_layer: "GL20-29"
      status: "active"
      location: "gl/20-data/artifacts"
      schemas:
        - "gl/20-data/artifacts/database-architecture-specification.yaml"
      functions:
        - "define_data_models"
        - "manage_schema_migrations"
        - "enforce_data_governance"
        - "optimize_data_access"
      description: |
        Database architecture specification covering data models, access patterns,
        schema management, data governance, backup/recovery, and security.
    
    # GL50-69: Security Layer
    - id: "rke2-security"
      name: "RKE2 Security Hardening"
      gl_layer: "GL50-69"
      status: "active"
      location: "infrastructure/rke2"
      configs:
        - "infrastructure/rke2/profiles/production/config.yaml"
        - "infrastructure/rke2/profiles/production/encryption-provider-config.yaml"
        - "infrastructure/rke2/profiles/production/psa-config.yaml"
        - "infrastructure/rke2/profiles/production/audit-policy.yaml"
      scripts:
        - "infrastructure/rke2/scripts/install-rke2.sh"
        - "infrastructure/rke2/scripts/validate-cis.sh"
      manifests:
        - "infrastructure/rke2/manifests/network-policies/default-deny-all.yaml"
      documentation:
        - "infrastructure/rke2/README.md"
      functions:
        - "configure_rke2_security"
        - "validate_cis_compliance"
        - "deploy_rke2_cluster"
        - "audit_rke2_configuration"
      description: |
        RKE2 (Rancher Kubernetes Engine 2) security hardening implementation aligned with
        CIS Kubernetes Benchmark v1.9.0. Includes encryption at rest, Pod Security Admission,
        network policies, audit logging, and automated compliance validation.
  
  # AI 操作接口
  ai_interface:
    # 驗證接口
    validate:
      endpoint: "validate"
      input_schema: "schemas/validation-request.schema.yaml"
      output_schema: "schemas/validation-response.schema.yaml"
      tools: ["workspace/src/governance/35-scripts/naming-validator.sh"]
    
    # 生成接口
    generate:
      endpoint: "generate"
      input_schema: "schemas/generation-request.schema.yaml"
      output_schema: "schemas/generation-response.schema.yaml"
      tools: ["workspace/src/governance/35-scripts/naming-generator.sh"]
    
    # 變更管理接口
    change:
      endpoint: "change"
      input_schema: "schemas/change-request.schema.yaml"
      output_schema: "schemas/change-response.schema.yaml"
      workflow: "workspace/src/governance/03-change/naming-rfc-workflow.yaml"
    
    # 例外處理接口
    exception:
      endpoint: "exception"
      input_schema: "schemas/exception-request.schema.yaml"
      output_schema: "schemas/exception-response.schema.yaml"
      workflow: "workspace/src/governance/02-decision/naming-exception-process.yaml"
    
    # 報告接口
    report:
      endpoint: "report"
      input_schema: "schemas/report-request.schema.yaml"
      output_schema: "schemas/report-response.schema.yaml"
      sources: ["workspace/src/governance/13-metrics-reporting"]
  
  # 機器可執行的工作流
  workflows:
    pre_commit_validation:
      trigger: "git_pre_commit"
      steps:
        - load_manifest: "governance-manifest.yaml"
        - validate_file: "workspace/src/governance/35-scripts/naming-validator.sh"
        - check_alerts: "workspace/src/governance/10-policy/naming-alert-rules.yaml"
      on_failure: "block_commit"
    
    ci_pipeline_check:
      trigger: "ci_pipeline"
      steps:
        - load_manifest: "governance-manifest.yaml"
        - batch_validate: "workspace/src/governance/35-scripts/naming-cli-tool.sh"
        - generate_report: "workspace/src/governance/13-metrics-reporting"
        - check_compliance: "workspace/src/governance/07-audit"
      on_failure: "fail_build"
    
    naming_request:
      trigger: "api_request"
      steps:
        - load_manifest: "governance-manifest.yaml"
        - generate_name: "workspace/src/governance/35-scripts/naming-generator.sh"
        - validate_name: "workspace/src/governance/35-scripts/naming-validator.sh"
        - record_request: "workspace/src/governance/14-improvement/naming-improvement-log.yaml"
      on_failure: "return_error"
  
  # 自動化配置
  automation:
    ci_integration:
      github_actions: "templates/ci/github-actions-naming-check.yml"
      gitlab_ci: "templates/ci/gitlab-ci-naming-check.yml"
      jenkins: "templates/ci/jenkins-naming-check.groovy"
    
    monitoring:
      prometheus_rules: "templates/monitoring/prometheus-rules.yaml"
      grafana_dashboards: "templates/monitoring/grafana-dashboard.json"
    
    notifications:
      slack: "templates/notifications/slack-webhook.yaml"
      email: "templates/notifications/email-template.yaml"
  
  # 版本和兼容性
  compatibility:
    min_ai_version: "1.0.0"
    supported_apis:
      - "governance.machinenativeops.io/v1"
    data_formats:
      - "yaml"
      - "json"
    execution_environments:
      - "bash"
      - "python"
      - "node"