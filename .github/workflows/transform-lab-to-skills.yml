# @GL-governed
# @GL-layer: CI/CD
# @GL-semantic: workflow-validation
# @GL-audit-trail: ../../engine/governance/GL_SEMANTIC_ANCHOR.json
#
# GL Unified Charter Activated
name: Transform GitHub Lab to GitHub Skills

on:
  push:
    paths:
      - 'config.yml'
      - 'course-details.md'
  workflow_dispatch:
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  transform:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v6

      - name: Transform GitHub lab to GitHub skills format
        uses: wix-academy/github-lab-config-to-github-skills-readme-action@v4.2
        with:
          config-file: 'config.yml'
          course-details-file: 'course-details.md'
          readme-file: 'README.md'

      - name: Commit generated README
        uses: stefanzweifel/git-auto-commit-action@v7
        with:
          commit_message: "Generate README.md from config.yml + course-details.md"
          file_pattern: 'README.md'
