# @GL-governed
# @GL-layer: agents
# @GL-semantic: agent-orchestration-configuration
# @GL-audit-trail: ../../engine/governance/GL_SEMANTIC_ANCHOR.json
#
# GL Unified Charter Activated
# Multi-Agent Orchestration Configuration v9.0.0
# DAG-Aware Orchestration

apiVersion: orchestration.machinenativeops.io/v1
kind: AgentOrchestration
metadata:
  name: multi-agent-parallel-orchestration
  version: "9.0.0"
  created_at: "2026-01-28T00:00:00Z"
  updated_at: "2026-01-30T00:00:00Z"
  layer: "GL90-99"
  owner: "engineering-team"
  annotations:
    governance.machinenativeops.io/classification: "internal"
    governance.machinenativeops.io/approval: "approved"
    governance.machinenativeops.io/charter-version: "2.0.0"
    governance.machinenativeops.io/semantic-enabled: "true"
    governance.machinenativeops.io/srg-aware: "true"

spec:
  # Parallel execution strategy
  parallelism:
    max_concurrent_agents: 100
    timeout_seconds: 3600
    retry_policy:
      max_retries: 3
      backoff_multiplier: 2

  # Semantic Resource Graph requirements
  semantic_prerequisites:
    enabled: true
    srg_required: true
    srg_validation_required: true
    build_before_orchestration: true
    refresh_interval_seconds: 300

  # Global DAG requirements
  dag_prerequisites:
    enabled: true
    global_dag_required: true
    dag_validation_required: true
    build_before_orchestration: true
    refresh_interval_seconds: 300
    include_external_repos: true

  # Agent definitions
  agents:
    - id: global-dag-builder
      name: "Global DAG Builder Agent"
      type: "dag-builder"
      priority: 0
      enabled: true
      semantic_aware: true
      config:
        build_scope:
          - "all-repositories"
          - "external-dependencies"
        scan_interval_seconds: 300
        dependency_resolution: "semantic"
        include_test_repos: false
        generate_dag_visualization: true
        validate_dag_consistency: true
      dependencies: []
      outputs:
        - "global-dag-graph.json"
        - "dag-nodes.json"
        - "dag-edges.json"
        - "dag-dependencies.json"

    - id: global-dag-executor
      name: "Global DAG Executor Agent"
      type: "dag-executor"
      priority: 0
      enabled: true
      semantic_aware: true
      config:
        parallel_execution: true
        max_parallel_tasks: 100
        execution_timeout_seconds: 3600
        retry_policy:
          max_retries: 3
          backoff_multiplier: 2
        deadlock_detection: true
        automatic_recovery: true
        execution_tracking: true
      dependencies:
        - "global-dag-builder"
      outputs:
        - "dag-execution-log.json"
        - "execution-results.json"
        - "execution-metrics.json"

    - id: cross-repo-resolver
      name: "Cross-Repo Resolver Agent"
      type: "resolver"
      priority: 0
      enabled: true
      semantic_aware: true
      config:
        resolution_strategy: "semantic"
        conflict_resolution: "priority"
        include_external_repos: true
        validate_resolutions: true
        cache_resolutions: true
        cache_ttl_seconds: 3600
      dependencies:
        - "global-dag-builder"
      outputs:
        - "dependency-resolutions.json"
        - "conflict-resolutions.json"
        - "resolution-report.json"

    - id: gl-governance-validator
      name: "GL Governance Validator Agent"
      type: "governance"
      priority: 1
      enabled: true
      semantic_aware: true
      config:
        validation_scope:
          - "engine"
          - "file-organizer-system"
          - "gl-audit-reports"
        strict_mode: true
        enforce_semantic_anchors: true
        require_srg_analysis: true
        validate_governance_tags: true
      dependencies: []
      outputs:
        - "gl-validation-report.json"
        - "gl-compliance-summary.md"

    - id: semantic-analyzer
      name: "Semantic Analyzer Agent"
      type: "semantic"
      priority: 1
      enabled: true
      semantic_aware: true
      config:
        parse_content: true
        classify_semantics: true
        map_gl_standards: true
        infer_schemas: true
        resolve_intents: true
        generate_semantic_reports: true
      dependencies: []
      outputs:
        - "semantic-analysis-report.json"
        - "semantic-classification-report.json"
        - "semantic-graph-status.json"

    - id: semantic-validator
      name: "Semantic Validator Agent"
      type: "semantic"
      priority: 2
      enabled: true
      semantic_aware: true
      config:
        validate_governance_tags: true
        validate_semantic_anchors: true
        validate_gl_layers: true
        validate_semantic_consistency: true
        check_schema_compliance: true
        check_intent_resolution: true
      dependencies:
        - "semantic-analyzer"
      outputs:
        - "semantic-validation-report.json"
        - "semantic-violation-summary.json"

    - id: semantic-repair-agent
      name: "Semantic Repair Agent"
      type: "repair"
      priority: 2
      enabled: true
      semantic_aware: true
      config:
        auto_repair_enabled: true
        repair_missing_tags: true
        repair_missing_anchors: true
        generate_governance_tags: true
        generate_semantic_anchors: true
        trust_requirement: "high"
      dependencies:
        - "semantic-validator"
      outputs:
        - "semantic-repair-report.json"
        - "semantic-fixes-applied.json"

    - id: codeql-monitor
      name: "CodeQL Monitor Agent"
      type: "monitoring"
      priority: 3
      enabled: true
      semantic_aware: false
      config:
        languages:
          - javascript
          - python
          - typescript
        scan_frequency: "daily"
        alert_threshold: "high"
      dependencies: []
      outputs:
        - "codeql-results.json"
        - "codeql-report.md"

    - id: quality-assurance
      name: "Quality Assurance Agent"
      type: "validation"
      priority: 4
      enabled: true
      semantic_aware: false
      config:
        checks:
          - "linting"
          - "formatting"
          - "test-coverage"
          - "security-scan"
        quality_threshold: 85
      dependencies: []
      outputs:
        - "quality-report.json"
        - "quality-metrics.md"

    - id: dependency-scanner
      name: "Dependency Scanner Agent"
      type: "security"
      priority: 5
      enabled: true
      semantic_aware: false
      config:
        scan_types:
          - "vulnerability"
          - "license"
          - "outdated"
        severity_filter: "medium+"
      dependencies: []
      outputs:
        - "dependency-report.json"
        - "vulnerability-summary.md"

    - id: architecture-validator
      name: "Architecture Validator Agent"
      type: "validation"
      priority: 6
      enabled: true
      semantic_aware: true
      config:
        validation_rules:
          - "gl-layer-compliance"
          - "api-version-consistency"
          - "metadata-completeness"
          - "semantic-consistency"
        schema_paths:
          - "gl/**/artifacts/*.yaml"
        require_srg_analysis: true
      dependencies:
        - "semantic-analyzer"
      outputs:
        - "architecture-validation.json"
        - "compliance-report.md"

    - id: documentation-generator
      name: "Documentation Generator Agent"
      type: "documentation"
      priority: 7
      enabled: true
      semantic_aware: true
      config:
        formats:
          - "markdown"
          - "yaml"
          - "json"
        templates_path: ".github/templates/"
        use_semantic_metadata: true
      dependencies:
        - "architecture-validator"
        - "semantic-analyzer"
      outputs:
        - "generated-docs/"
        - "docs-index.md"

    - id: performance-monitor
      name: "Performance Monitor Agent"
      type: "monitoring"
      priority: 8
      enabled: true
      semantic_aware: false
      config:
        metrics:
          - "execution-time"
          - "resource-usage"
          - "throughput"
        benchmark_targets:
          execution_time_ms: 5000
          memory_mb: 512
      dependencies: []
      outputs:
        - "performance-metrics.json"
        - "performance-report.md"

    - id: data-sync-agent
      name: "Data Synchronization Agent"
      type: "synchronization"
      priority: 1
      enabled: true
      semantic_aware: false
      config:
        serviceConfig: "instant/configs/data-sync-config.yaml"
        pipelines:
          - "users-sync"
          - "orders-sync"
          - "inventory-sync"
        integration_points:
          - "file-organizer-system"
          - "AEP-Engine"
        sync_modes:
          - "real-time"
          - "scheduled"
      dependencies: []
      outputs:
        - "sync-status.json"
        - "sync-report.md"

    - id: security-auditor
      name: "Security Auditor Agent"
      type: "security"
      priority: 9
      enabled: true
      semantic_aware: false
      config:
        audit_scopes:
          - "code"
          - "dependencies"
          - "configuration"
          - "secrets"
        compliance_standards:
          - "OWASP"
          - "CIS"
      dependencies:
        - "dependency-scanner"
      outputs:
        - "security-audit.json"
        - "security-findings.md"

    - id: reporting-aggregator
      name: "Reporting Aggregator Agent"
      type: "aggregation"
      priority: 10
      enabled: true
      semantic_aware: true
      config:
        aggregation_strategy: "merge"
        output_formats:
          - "summary"
          - "detailed"
          - "dashboard"
        include_semantic_reports: true
        include_semantic_metrics: true
      dependencies:
        - "gl-governance-validator"
        - "semantic-analyzer"
        - "semantic-validator"
        - "semantic-repair-agent"
        - "codeql-monitor"
        - "quality-assurance"
        - "dependency-scanner"
        - "architecture-validator"
        - "performance-monitor"
        - "security-auditor"
      outputs:
        - "orchestration-report.json"
        - "executive-summary.md"
        - "dashboard-data.json"
        - "semantic-executive-summary.json"

  # Communication channels
  channels:
    - id: events
      type: "event-bus"
      config:
        retention_hours: 24
        max_size_mb: 100
        semantic_events_enabled: true

    - id: alerts
      type: "notification"
      config:
        webhook_url: "${ALERT_WEBHOOK_URL}"
        severity_filter: "high+"
        include_semantic_alerts: true

  # Resource limits
  resources:
    memory_limit_mb: 4096
    cpu_limit_cores: 8
    disk_limit_mb: 2048
    network_bandwidth_mbps: 1000

  # Monitoring configuration
  monitoring:
    enabled: true
    metrics_port: 9090
    health_check_interval_seconds: 30
    log_level: "info"
    log_output: "stdout"
    semantic_metrics_enabled: true

status:
  phase: "configured"
  semantic_graph_ready: false
  conditions:
    - type: "AgentsConfigured"
      status: "True"
      lastTransitionTime: "2026-01-28T00:00:00Z"
      reason: "All agents successfully configured with semantic awareness"
    - type: "DependenciesResolved"
      status: "True"
      lastTransitionTime: "2026-01-28T00:00:00Z"
      reason: "Agent dependency graph validated"
    - type: "ResourcesAllocated"
      status: "True"
      lastTransitionTime: "2026-01-28T00:00:00Z"
      reason: "Resource limits set"
    - type: "GLGovernanceIntegrated"
      status: "True"
      lastTransitionTime: "2026-01-28T00:31:00Z"
      reason: "GL governance validator agent activated"
    - type: "SemanticAgentsEnabled"
      status: "True"
      lastTransitionTime: "2026-01-28T00:00:00Z"
      reason: "Semantic analysis agents enabled"
    - type: "SRGAwarenessEnabled"
      status: "True"
      lastTransitionTime: "2026-01-28T00:00:00Z"
      reason: "SRG awareness enabled for orchestration"