# @GL-governed
# @GL-layer: GL00-09
# @GL-semantic: general-component
# @GL-audit-trail: gl-enterprise-architecture/governance/audit-trails/GL00_09-audit.json
#
# GL Unified Charter Activated
# GL Root Semantic Anchor: gl-enterprise-architecture/governance/GL-ROOT-SEMANTIC-ANCHOR.yaml
# GL Unified Naming Charter: gl-enterprise-architecture/governance/GL-UNIFIED-NAMING-CHARTER.yaml


apiVersion: alerting.machinenativeops.io/v1
kind: AlertingConfig
metadata:
  name: gl-quantum-alerting
  namespace: monitoring
  labels:
    gl-version: v10.0.0
    tier: quantum-monitoring
spec:
  global:
    evaluationInterval: 30s
    timeout: 10s
    externalLabels:
      cluster: gl-quantum
      environment: production
      
  alertmanager:
    enabled: true
    retention: 90d
    
  routes:
    - name: naming-governance
      match:
        severity: critical
      receiver: platform-team-critical
      continue: false
      
    - name: naming-governance-warning
      match:
        severity: warning
      receiver: platform-team-warning
      continue: false
      
  receivers:
    - name: platform-team-critical
      slackConfigs:
        - channel: "#platform-alerts-critical"
          sendResolved: true
          iconEmoji: "üö®"
          username: "GL Quantum Alert"
          apiURL: ${{ secrets.SLACK_WEBHOOK_URL }}
          
      emailConfigs:
        - to: platform-team@machinenativeops.com
          sendResolved: true
          
      pagerDutyConfigs:
        - serviceKey: ${{ secrets.PAGERDUTY_SERVICE_KEY }}
          severity: critical
          
    - name: platform-team-warning
      slackConfigs:
        - channel: "#platform-alerts-warning"
          sendResolved: true
          iconEmoji: "‚ö†Ô∏è"
          username: "GL Quantum Alert"
          apiURL: ${{ secrets.SLACK_WEBHOOK_URL }}
          
      emailConfigs:
        - to: platform-team@machinenativeops.com
          sendResolved: true
          
  inhibitionRules:
    - sourceMatch:
        severity: critical
      targetMatch:
        severity: warning
      equal: ["namespace", "alertname"]