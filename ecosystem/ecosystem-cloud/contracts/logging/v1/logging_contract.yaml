# Cross-Cloud Logging Contract v1.0.0
# Semantic Anchor: CLOUDPROVIDERABSTRACTION.LOGGING

contract:
  name: CrossCloudLogging
  version: 1.0.0
metadata:
  name: ""
  description: ""
  labels: {}

  semantic_anchor: CLOUDPROVIDERABSTRACTION.LOGGING
  description: |
    Unified abstraction for cloud logging services across all providers.
    Defines the contract that all cloud adapters must implement for logging operations.
  
  capability:
    - name: create_log_group
      input:
        log_group_name: string (required)
        retention_in_days: integer (optional)
        kms_key_id: string (optional)
        tags: map[string]string (optional)
      output:
        success: boolean
        log_group_arn: string
    
    - name: delete_log_group
      input:
        log_group_name: string (required)
      output:
        success: boolean
    
    - name: put_log_events
      input:
        log_group_name: string (required)
        log_stream_name: string (required)
        log_events: list[LogEvent] (required)
        sequence_token: string (optional)
      output:
        success: boolean
        next_sequence_token: string
        rejected_log_events_info: RejectedLogEventsInfo
    
    - name: get_log_events
      input:
        log_group_name: string (required)
        log_stream_name: string (required)
        start_time: timestamp (optional)
        end_time: timestamp (optional)
        limit: integer (optional)
        next_token: string (optional)
        filter_pattern: string (optional)
      output:
        success: boolean
        events: list[LogEvent]
        next_forward_token: string
        next_backward_token: string
    
    - name: create_log_stream
      input:
        log_group_name: string (required)
        log_stream_name: string (required)
      output:
        success: boolean
    
    - name: describe_log_streams
      input:
        log_group_name: string (required)
        log_stream_name_prefix: string (optional)
        limit: integer (optional)
        next_token: string (optional)
        order_by: string (optional)
        descending: boolean (optional)
      output:
        success: boolean
        log_streams: list[LogStream]
        next_token: string
    
    - name: filter_log_events
      input:
        log_group_name: string (required)
        log_stream_names: list[string] (optional)
        start_time: timestamp (optional)
        end_time: timestamp (optional)
        filter_pattern: string (optional)
        limit: integer (optional)
        next_token: string (optional)
      output:
        success: boolean
        events: list[LogEvent]
        searched_log_streams: list[string]
        next_token: string
    
    - name: put_retention_policy
      input:
        log_group_name: string (required)
        retention_in_days: integer (required)
      output:
        success: boolean

  types:
    LogEvent:
      timestamp: timestamp
      message: string
    
    LogStream:
      log_stream_name: string
      creation_time: timestamp
      first_event_timestamp: timestamp
      last_event_timestamp: timestamp
      last_ingestion_time: timestamp
      upload_sequence_token: string
      arn: string
    
    RejectedLogEventsInfo:
      too_new_log_event_start_index: integer
      too_old_log_event_end_index: integer
      expired_log_event_end_index: integer

  validation:
    - name: log_group_name_validation
      rule: |
        Log group names must:
        - Be 1-512 characters long
        - Contain only alphanumeric, hyphens, and underscores
        - Start with alphanumeric or underscore
      severity: CRITICAL
    
    - name: log_stream_name_validation
      rule: |
        Log stream names must:
        - Be 1-512 characters long
        - Contain only alphanumeric, hyphens, and underscores
        - Not contain consecutive underscores
      severity: HIGH
    
    - name: event_batch_validation
      rule: |
        Must send between 1 and 10,000 log events per batch
      severity: HIGH
    
    - name: event_size_validation
      rule: |
        Each log event must not exceed 256KB
      severity: MEDIUM
    
    - name: retention_period_validation
      rule: |
        Retention must be between 1 and 3653 days (10 years)
      severity: MEDIUM

  adapter_requirements:
    - Adapter must implement all capability methods
    - Adapter must support structured logging (JSON format)
    - Adapter must support log filtering and search
    - Adapter must support retention policies
    - Adapter must handle provider-specific log formats
    - Adapter must provide metrics for log ingestion
    - Adapter must ensure log delivery durability
  
  compatibility:
    aws_cloudwatch_logs:
      implements: full
      notes: AWS CloudWatch Logs is the reference implementation
    azure_monitor:
      implements: partial
      notes: Different model, needs mapping
    gcp_cloud_logging:
      implements: partial
      notes: Different model, needs adapter
    elk_stack:
      implements: full
      notes: Elasticsearch + Logstash + Kibana, popular on-premise option