# On-Premise Platform Template

æœ¬åœ°éƒ¨ç½²å¹³å°æ¨¡æ¿ - ç”¨æ–¼ç§æœ‰æ•¸æ“šä¸­å¿ƒå’Œé‚Šç·£ç’°å¢ƒ

**GL Governance Layer**: GL10-29 (Operational Layer)  
**Template Type**: On-Premise  
**Version**: 1.0.0

---

## ğŸ“‹ æ¦‚è¿°

On-Premise Template é‡å°ç§æœ‰æ•¸æ“šä¸­å¿ƒã€é‚Šç·£è¨ˆç®—å’Œé›¢ç·šç’°å¢ƒå„ªåŒ–ã€‚

### é©ç”¨å ´æ™¯

- âœ… ç§æœ‰æ•¸æ“šä¸­å¿ƒ
- âœ… é‚Šç·£è¨ˆç®—ç¯€é»
- âœ… é›¢ç·š/æ°£éš™ç’°å¢ƒ
- âœ… åˆè¦æ€§è¦æ±‚åš´æ ¼çš„ç’°å¢ƒ

---

## ğŸ¯ æœ¬åœ°ç‰¹æ€§

### 1. è‡ªåŒ…å«éƒ¨ç½²
- ç„¡å¤–éƒ¨ä¾è³´
- é›¢ç·šå®‰è£æ”¯æŒ
- æœ¬åœ°å­˜å„²
- æœ¬åœ°æœå‹™ç™¼ç¾

### 2. é«˜å¯ç”¨æ€§
- å¤šç¯€é»éƒ¨ç½²
- æ•…éšœè½‰ç§»
- æ•¸æ“šè¤‡è£½
- è² è¼‰å‡è¡¡

### 3. å®‰å…¨æ€§
- å®Œå…¨æ§åˆ¶
- ç¶²çµ¡éš”é›¢
- æœ¬åœ°åŠ å¯†
- å¯©è¨ˆæ—¥èªŒ

### 4. æ€§èƒ½å„ªåŒ–
- ä½å»¶é²
- é«˜ååé‡
- æœ¬åœ°ç·©å­˜
- æ‰¹é‡è™•ç†

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å–®ç¯€é»éƒ¨ç½²

```bash
# 1. ç³»çµ±è¦æ±‚æª¢æŸ¥
bash scripts/prerequisites.sh

# 2. é…ç½®å¹³å°
vim configs/platform-config.yaml

# 3. å®‰è£ä¾è³´
bash scripts/install-dependencies.sh

# 4. éƒ¨ç½²å¹³å°
bash scripts/deploy-single-node.sh

# 5. é©—è­‰éƒ¨ç½²
bash scripts/validate.sh
```

### é›†ç¾¤éƒ¨ç½²

```bash
# 1. é…ç½®ä¸»ç¯€é»
bash scripts/init-master.sh

# 2. åŠ å…¥å·¥ä½œç¯€é»
# åœ¨æ¯å€‹å·¥ä½œç¯€é»ä¸Šé‹è¡Œï¼š
bash scripts/join-worker.sh --master-ip <master-ip>

# 3. é©—è­‰é›†ç¾¤
bash scripts/cluster-status.sh
```

---

## âš™ï¸ é…ç½®èªªæ˜

### ç³»çµ±è¦æ±‚

**æœ€å°é…ç½®**:
- CPU: 4 cores
- Memory: 8 GB
- Disk: 100 GB
- OS: Ubuntu 20.04 / RHEL 8 / CentOS 8

**æ¨è–¦é…ç½®**:
- CPU: 8 cores
- Memory: 16 GB
- Disk: 500 GB SSD
- OS: Ubuntu 22.04 / RHEL 9

### ç¶²çµ¡è¦æ±‚

**ç«¯å£**:
- 8000: API Gateway
- 8080: Data Sync
- 8500: Service Discovery
- 5672: Message Bus
- 9090-9099: Monitoring

**é˜²ç«ç‰†è¦å‰‡**:
```bash
# å…è¨±å…§éƒ¨é€šä¿¡
sudo ufw allow from 10.0.0.0/8 to any port 8000:8500

# å…è¨±ç›£æ§ç«¯å£
sudo ufw allow 9090:9099/tcp
```

---

## ğŸ”§ è…³æœ¬èªªæ˜

### prerequisites.sh
æª¢æŸ¥ç³»çµ±è¦æ±‚ï¼š
- æ“ä½œç³»çµ±ç‰ˆæœ¬
- CPUã€å…§å­˜ã€ç£ç›¤
- ç¶²çµ¡é…ç½®
- ä¾è³´è»Ÿä»¶

### install-dependencies.sh
å®‰è£ä¾è³´ï¼š
- Python 3.8+
- Docker / Podman
- ç³»çµ±åº«
- ç›£æ§å·¥å…·

### deploy-single-node.sh
å–®ç¯€é»éƒ¨ç½²ï¼š
- åˆå§‹åŒ–æ•¸æ“šç›®éŒ„
- å•Ÿå‹•æ‰€æœ‰æœå‹™
- é…ç½®é˜²ç«ç‰†
- é©—è­‰éƒ¨ç½²

### init-master.sh
åˆå§‹åŒ–ä¸»ç¯€é»ï¼š
- é…ç½®é›†ç¾¤
- å•Ÿå‹•æ§åˆ¶å¹³é¢
- ç”ŸæˆåŠ å…¥ä»¤ç‰Œ
- è¨­ç½®è² è¼‰å‡è¡¡

### join-worker.sh
åŠ å…¥å·¥ä½œç¯€é»ï¼š
- é€£æ¥ä¸»ç¯€é»
- ä¸‹è¼‰é…ç½®
- å•Ÿå‹•æœå‹™
- è¨»å†Šç¯€é»

---

## ğŸ—ï¸ æ¶æ§‹

### å–®ç¯€é»æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Single Node                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Service Discovery (8500)   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚   API Gateway (8000)         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚   Message Bus (5672)         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚   Data Sync (8080)           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         Local Storage (/data)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é›†ç¾¤æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Load Balancer                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Master 1   â”‚  â”‚   Master 2   â”‚
    â”‚   (Active)   â”‚  â”‚  (Standby)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                              â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚ Worker 1 â”‚  â”‚ Worker 2 â”‚  â”‚ Worker 3â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ å­˜å„²é…ç½®

### æ•¸æ“šç›®éŒ„

```
/data/
â”œâ”€â”€ platform/          # å¹³å°æ•¸æ“š
â”‚   â”œâ”€â”€ registry/     # æœå‹™è¨»å†Šè¡¨
â”‚   â”œâ”€â”€ cache/        # ç·©å­˜
â”‚   â””â”€â”€ sync/         # åŒæ­¥æ•¸æ“š
â”œâ”€â”€ services/         # æœå‹™æ•¸æ“š
â”œâ”€â”€ logs/            # æ—¥èªŒ
â””â”€â”€ backups/         # å‚™ä»½
```

### å‚™ä»½ç­–ç•¥

```yaml
backup:
  enabled: true
  schedule: "0 2 * * *"  # æ¯å¤©å‡Œæ™¨2é»
  retention: 7  # ä¿ç•™7å¤©
  destinations:
    - /backup/local
    - nfs://backup-server/platform
```

---

## ğŸ” ç›£æ§å’Œæ—¥èªŒ

### Prometheus é›†æˆ

```yaml
monitoring:
  prometheus:
    enabled: true
    port: 9090
    scrape_interval: 30s
    
    targets:
      - localhost:9091  # Service Discovery metrics
      - localhost:9092  # API Gateway metrics
      - localhost:9093  # Data Sync metrics
```

### æ—¥èªŒç®¡ç†

```yaml
logging:
  syslog:
    enabled: true
    server: localhost
    port: 514
  
  rotation:
    max_size: 100M
    max_files: 10
    compress: true
```

---

## ğŸ” å®‰å…¨é…ç½®

### é˜²ç«ç‰†

```bash
# é…ç½® iptables
sudo iptables -A INPUT -p tcp --dport 8000:8500 -s 10.0.0.0/8 -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 8000:8500 -j DROP
```

### SELinux / AppArmor

```bash
# SELinux é…ç½®
sudo semanage port -a -t http_port_t -p tcp 8000
sudo semanage port -a -t http_port_t -p tcp 8500
```

### TLS é…ç½®

```yaml
security:
  tls:
    enabled: true
    cert_file: /etc/platform/certs/server.crt
    key_file: /etc/platform/certs/server.key
    ca_file: /etc/platform/certs/ca.crt
```

---

## ğŸ› æ•…éšœæ’é™¤

### æœå‹™ç„¡æ³•å•Ÿå‹•

```bash
# æª¢æŸ¥ç³»çµ±æ—¥èªŒ
sudo journalctl -u platform-* --since today

# æª¢æŸ¥ç«¯å£å ç”¨
sudo netstat -tulpn | grep -E "8000|8500|5672"

# æª¢æŸ¥ç£ç›¤ç©ºé–“
df -h
```

### ç¶²çµ¡é€£æ¥å•é¡Œ

```bash
# æª¢æŸ¥é˜²ç«ç‰†
sudo ufw status
sudo iptables -L

# æ¸¬è©¦ç«¯å£é€£æ¥
telnet localhost 8000
nc -zv localhost 8500
```

---

**GL Compliance**: Yes  
**Layer**: GL10-29 (Platform Services)  
**Status**: Active  
**Template Version**: 1.0.0  
**Deployment**: On-Premise, Edge
