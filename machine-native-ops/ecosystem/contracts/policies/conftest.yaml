# @GL-governed
# @GL-layer: GQS-L2
# @GL-semantic: policy-validation
# @GL-audit-trail: ./governance/GL_SEMANTIC_ANCHOR.json

---
# Conftest Configuration
# Conftest 配置文件
#
# Purpose: 定義 Conftest 策略驗證規則
# Version: 1.0.0

version: "1.0.0"

# 政策目錄
policies:
  - ecosystem/contracts/policies/

# 排除目錄
exclude:
  - .git/
  - .github/
  - node_modules/
  - vendor/
  - .governance/
  - ecosystem/logs/
  - ecosystem/governance/artifacts/

# 驗證規則
rules:
  # Kubernetes 命名規範
  - name: "kubernetes-naming-policy"
    description: "Enforce Kubernetes resource naming conventions"
    severity: "error"
    policy: "naming-policy.rego"
    
  # 安全政策
  - name: "security-policy"
    description: "Enforce security best practices"
    severity: "error"
    policy: "security-policy.rego"
    
  # CI/CD 政策
  - name: "cicd-policy"
    description: "Enforce CI/CD best practices"
    severity: "warning"
    policy: "cicd-policy.rego"
    
  # 治理政策
  - name: "governance-policy"
    description: "Enforce governance requirements"
    severity: "error"
    policy: "governance-policy.rego"

# 輸出格式
output: "json"

# 顏色輸出
color: true

# 詳細輸出
trace: false

# 超時
timeout: "30s"