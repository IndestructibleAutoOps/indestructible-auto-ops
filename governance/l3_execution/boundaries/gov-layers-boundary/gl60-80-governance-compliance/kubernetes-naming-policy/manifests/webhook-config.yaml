---
# ValidatingWebhookConfiguration for Naming Policy
# GL Layer: GL60-80 Governance Compliance
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: naming-policy-webhook
  labels:
    app: naming-policy-webhook
    component: governance
    gov-layer: gl60-80
webhooks:
- name: naming-policy.platform.svc
  clientConfig:
    service:
      name: naming-policy-webhook
      namespace: platform
      path: /validate
    caBundle: # BASE64_ENCODED_CA_CERT (replace with actual value)
  rules:
  - operations: ["CREATE", "UPDATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["pods"]
    scope: "Namespaced"
  - operations: ["CREATE", "UPDATE"]
    apiGroups: ["apps"]
    apiVersions: ["v1"]
    resources: ["deployments", "statefulsets", "daemonsets"]
    scope: "Namespaced"
  - operations: ["CREATE", "UPDATE"]
    apiGroups: ["batch"]
    apiVersions: ["v1"]
    resources: ["jobs", "cronjobs"]
    scope: "Namespaced"
  - operations: ["CREATE", "UPDATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["services"]
    scope: "Namespaced"
  admissionReviewVersions: ["v1"]
  sideEffects: None
  failurePolicy: Fail
  timeoutSeconds: 5
  namespaceSelector:
    matchLabels:
      naming-policy-enforcement: enabled
