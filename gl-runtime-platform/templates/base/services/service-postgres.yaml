# GL Runtime Platform PostgreSQL 服務

apiVersion: v1
kind: Service
metadata:
  name: gl-runtime-postgres-svc
  namespace: team-gl-runtime-base
  labels:
    # Kubernetes 標準標籤
    app.kubernetes.io/name: 'gl-runtime-postgres'
    app.kubernetes.io/component: 'service'
    app.kubernetes.io/part-of: 'gl-runtime-platform'
    app.kubernetes.io/version: 'v1.0.0'
    app.kubernetes.io/managed-by: 'kubectl'
    
    # 企業治理標籤
    tenant: 'gl-runtime-team'
    cost-center: 'platform-engineering'
    business-unit: 'infrastructure'
    project: 'gl-runtime-platform'
    
    # 操作標籤
    tier: 'data'
    service.type: 'clusterip'
    backup.tier: 'gold'
    
  annotations:
    # 描述性註解
    description: 'GL Runtime Platform PostgreSQL 資料庫服務'
    owner: 'platform-team@gl-runtime.io'
    
    # 服務網格註解（如果使用 Istio）
    service.istio.io/canonical-name: 'gl-runtime-postgres'
    service.istio.io/canonical-revision: 'v1-0-0'
    
    # 負載均衡器註解（如果使用 AWS ALB/NLB）
    # service.beta.kubernetes.io/aws-load-balancer-type: 'nlb'
    # service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled: 'true'
    
    # 安全註解
    security.classification: 'confidential'
    encryption.required: 'true'
    
spec:
  type: ClusterIP
  sessionAffinity: None
  selector:
    app.kubernetes.io/name: 'gl-runtime-postgres'
    app.kubernetes.io/component: 'database'
  ports:
  - name: postgresql
    port: 5432
    targetPort: postgresql
    protocol: TCP
  - name: metrics
    port: 9187
    targetPort: metrics
    protocol: TCP