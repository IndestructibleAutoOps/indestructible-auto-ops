# @GL-governed
# @GL-layer: GL90-99
# @GL-semantic: auto-bootstrap-configuration
# @GL-audit-trail: ../../../engine/governance/GL_SEMANTIC_ANCHOR.json
#
# GL Unified Charter Activated
# Auto-Integration Configuration

apiVersion: bootstrap.machinenativeops.io/v1
kind: AutoIntegrationConfiguration
metadata:
  name: gl-auto-integrate
  version: "1.0.0"
  created_at: "2026-01-28T00:00:00Z"
  layer: "GL90-99"

spec:
  enabled: true
  integration_modes:
    - name: "continuous"
      trigger: "file_change"
      pipeline: "auto-integrate-pipeline"
    
    - name: "batch"
      trigger: "schedule"
      schedule: "0 */6 * * *"
      pipeline: "batch-integrate-pipeline"
    
    - name: "manual"
      trigger: "api_call"
      pipeline: "manual-integrate-pipeline"

  integration_points:
    - id: "gl-core-integration"
      name: "GL Core Integration"
      type: "governance"
      priority: 100
      config:
        source: "governance/gl-core"
        targets:
          - "engine/orchestration-engine"
          - "engine/sandbox-runner"
          - "engine/scheduler"
        integration_type: "runtime"
        validate_on_integrate: true

    - id: "connector-integration"
      name: "Connector Integration"
      type: "extension"
      priority: 90
      config:
        source: "connectors/*"
        targets:
          - "engine/orchestration-engine"
          - "governance/gl-policy-engine"
        integration_type: "plugin"
        auto_register: true

    - id: "pipeline-integration"
      name: "Pipeline Integration"
      type: "workflow"
      priority: 85
      config:
        source: "ops/pipelines/*"
        targets:
          - "engine/orchestration-engine"
          - "engine/scheduler"
        integration_type: "orchestration"
        validate_syntax: true

    - id: "storage-integration"
      name: "Storage Integration"
      type: "data"
      priority: 80
      config:
        source: "storage/*"
        targets:
          - "engine/orchestration-engine"
          - "governance/gl-core"
        integration_type: "persistence"
        ensure_availability: true

  validation:
    pre_integration:
      enabled: true
      checks:
        - "dependency_satisfied"
        - "conflict_free"
        - "version_compatible"
    post_integration:
      enabled: true
      checks:
        - "integration_successful"
        - "functionality_preserved"
        - "performance_degraded"
      rollback_on_failure: true

  hooks:
    pre_integration:
      - name: "validate-dependencies"
        type: "validation"
        script: "../scripts/validate-dependencies.sh"
      - name: "create-snapshot"
        type: "backup"
        action: "snapshot"
    
    post_integration:
      - name: "run-integration-tests"
        type: "test"
        script: "../scripts/run-integration-tests.sh"
      - name: "update-metadata"
        type: "metadata"
        action: "update"

  notifications:
    enabled: true
    channels:
      - type: "event-stream"
      - type: "log"
      - type: "slack"
        channel: "#gl-integrations"
    events:
      - "integration_started"
      - "integration_completed"
      - "integration_failed"
      - "integration_rolled_back"

  monitoring:
    enabled: true
    metrics:
      - "integrations_performed"
      - "integrations_failed"
      - "average_integration_time"
      - "integration_success_rate"
    reporting_interval: "hourly"

status:
  phase: "active"
  last_integration: null
  total_integrations: 0
  success_rate: 100