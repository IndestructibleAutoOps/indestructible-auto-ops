// @GL-governed
// @GL-layer: GL70-89
// @GL-semantic: runtime-auto-repair
// @GL-charter-version: 2.0.0
// @GL-audit-trail: ../../engine/governance/GL_SEMANTIC_ANCHOR.json

# @GL-governed
# @GL-layer: GL90-99
# @GL-semantic: auto-repair-configuration
# @GL-audit-trail: ../../engine/governance/GL_SEMANTIC_ANCHOR.json

apiVersion: gl.machinenativeops.io/v1
kind: AutoRepair
metadata:
  name: gl-runtime-auto-repair
  version: "1.0.0"
  layer: "GL90-99"
  owner: "engineering-team"
  annotations:
    governance.machinenativeops.io/classification: "internal"
    governance.machinenativeops.io/approval: "approved"
    governance.machinenativeops.io/charter-version: "2.0.0"

spec:
  enable: true
  trigger_on_issues:
    - "MISSING_GOVERNANCE_TAG"
    - "MISSING_SCHEMA"
    - "MISSING_PIPELINE_DEFINITION"
    - "NAMING_INCONSISTENCY"
    - "SEMANTIC_ANCHOR_MISMATCH"
    - "MISSING_METADATA"
    - "PATH_VIOLATION"
    - "LAYER_COMPLIANCE"
  pipeline: "repo-gl-fix-pipeline"
  mode: "per-file-sandbox"
  max_parallel_repairs: 8
  retry_policy:
    max_retries: 2
    backoff_multiplier: 2
  validation:
    sandbox_required: true
    build_required: true
    test_required: true
    gl_recheck_required: true
  scope:
    include:
      - "engine/**"
      - "gl-execution-runtime/**"
      - "file-organizer-system/**"
      - ".governance/**"
      - ".agent_hooks/**"
    exclude:
      - "node_modules/**"
      - "storage/**"
      - "*.log"
      - "*.lock"

status:
  phase: "configured"
  conditions:
    - type: "Enabled"
      status: "True"
      lastTransitionTime: "2026-01-28T13:29:00Z"
      reason: "Auto-repair layer activated"
    - type: "PipelineLinked"
      status: "True"
      lastTransitionTime: "2026-01-28T13:29:00Z"
      reason: "repo-gl-fix-pipeline linked"
    - type: "GLGovernanceIntegrated"
      status: "True"
      lastTransitionTime: "2026-01-28T13:29:00Z"
      reason: "GL semantic anchor verified"